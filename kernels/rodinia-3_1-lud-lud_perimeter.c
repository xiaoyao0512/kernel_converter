#include <stdio.h>

#include <stdbool.h>

#include <math.h>

#include "type.h"
 void A(  float* a,  float* b,  float* c,  float* d, int e, int f) {
  int g, h, i;
  int j;

for (int k = 0; k < 32; k++) {
  int l = k;

  if (l < 64) {
    j = l;
    i = f * e + f;
    for (g = 0; g < 64 / 2; g++) {
      b[(g * 2 + j)%32] = a[(i + j)%32];
      i += e;
    }

    i = f * e + f;
    for (g = 0; g < 64; g++) {
      c[(g * 2 + j)%32] = a[i + (k + 2) * 2 + j];
      i += e;
    }

  } else {
    j = l - 64;

    i = (f + 64 / 2) * e + f;
    for (g = 64 / 2; g < 64; g++) {
      b[(g * 2 + j)%32] = a[(i + j)%32];
      i += e;
    }

    i = (f + (k + 1) * 64) * e + f;
    for (g = 0; g < 64; g++) {
      d[(g * 2 + j)%32] = a[(i + j)%32];
      i += e;
    }
  }
  //barrier(1);
  //barrier(1);

  if (l < 64) {
    j = l;
    for (g = 1; g < 64; g++) {
      for (h = 0; h < g; h++)
        c[(g * 2 + j)%32] -= b[g * 2 + h] * c[h * 2 + j];
    }
  } else {
    j = l - 64;
    for (g = 0; g < 64; g++) {
      for (h = 0; h < g; h++)
        d[(j * 2 + g)%32] -= d[j * 2 + h] * b[h * 2 + g];
      d[(j * 2 + g)%32] /= b[g * 2 + g];
    }
  }

  //barrier(1);
  //barrier(1);

  if (l < 64) {
    j = l;
    i = (f + 1) * e + f;
    for (g = 1; g < 64; g++) {
      a[(i + (k + 1) * 64 + j)%32] = c[(g * 64 + j)%32];
      i += e;
    }
  } else {
    j = l - 64;
    i = (f + (k + 1) * 64) * e + f;
    for (g = 0; g < 64; g++) {
      a[(i + j)%2] = d[(g * 2 + j)%32];
      i += e;
    }
  }
}
}


void main() {

float a[32] = {5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0};
float b[32] = {5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0};
float c[32] = {5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0};
float d[32] = {5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0};
int e = 8;
int f = 8;

A (a, b, c, d, e, f);


}
